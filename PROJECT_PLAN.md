# ğŸ“‹ Plano do Projeto: Fraud Detection Data Pipeline

---

## ğŸ¯ Objetivo do Projeto

Construir um pipeline de dados completo para **prevenÃ§Ã£o de fraudes em cartÃµes de crÃ©dito**, simulando um ambiente real de banco/fintech, processando **50GB de dados financeiros sintÃ©ticos**.

---

## ğŸ§  O Que VocÃª Vai Aprender

### Habilidades TÃ©cnicas

| Ãrea | O que vai aprender |
|------|-------------------|
| **Data Generation** | Criar dados sintÃ©ticos realistas que simulam cenÃ¡rios de produÃ§Ã£o |
| **Streaming** | Processar dados em tempo real com Kafka |
| **Batch Processing** | Processar grandes volumes com Spark |
| **Data Lake** | Organizar dados em camadas (Medallion Architecture) |
| **Storage** | Usar MinIO como alternativa ao S3 |
| **SQL Analytics** | Criar queries analÃ­ticas para mÃ©tricas de negÃ³cio |
| **Data Visualization** | Construir dashboards com mÃ©tricas bancÃ¡rias |
| **Infrastructure** | Orquestrar mÃºltiplos serviÃ§os com Docker |

### Habilidades de NegÃ³cio

| Ãrea | O que vai aprender |
|------|-------------------|
| **Fraud Detection** | Regras reais usadas por bancos para detectar fraudes |
| **Banking KPIs** | MÃ©tricas que gestores e reguladores monitoram |
| **Compliance** | Conceitos de LGPD, BACEN, auditoria |
| **Risk Management** | Como classificar e priorizar riscos |
| **Chargeback Process** | Fluxo de disputas de transaÃ§Ãµes |

---

## ğŸ“š Como Vai Aprender

### MÃ©todo: Learn by Building

```
1. ENTENDER  â†’ Estudar o conceito teÃ³rico
2. PLANEJAR  â†’ Definir como implementar
3. FAZER     â†’ Construir na prÃ¡tica
4. QUEBRAR   â†’ Encontrar erros e limitaÃ§Ãµes
5. MELHORAR  â†’ Refatorar e otimizar
6. DOCUMENTAR â†’ Explicar o que fez
```

### Fases do Aprendizado

```
FASE 1: Fundamentos (Semana 1)
â”œâ”€â”€ Subir ambiente Docker na VPS
â”œâ”€â”€ Configurar ShadowTraffic
â”œâ”€â”€ Gerar primeiros dados (1GB teste)
â””â”€â”€ Validar que tudo funciona

FASE 2: Pipeline BÃ¡sico (Semana 2)
â”œâ”€â”€ Ler dados com Spark
â”œâ”€â”€ Criar camadas Bronze/Silver/Gold
â”œâ”€â”€ Salvar em formato Parquet
â””â”€â”€ Consultar dados processados

FASE 3: Regras de Fraude (Semana 3)
â”œâ”€â”€ Implementar as 8 regras de detecÃ§Ã£o
â”œâ”€â”€ Calcular fraud score
â”œâ”€â”€ Classificar transaÃ§Ãµes
â””â”€â”€ Validar precisÃ£o das regras

FASE 4: Operacional (Semana 4)
â”œâ”€â”€ Adicionar audit log
â”œâ”€â”€ Implementar blocklist
â”œâ”€â”€ Processar chargebacks
â””â”€â”€ Calcular mÃ©tricas de SLA

FASE 5: VisualizaÃ§Ã£o (Semana 5)
â”œâ”€â”€ Criar dashboard no Metabase
â”œâ”€â”€ Montar dashboard no Streamlit
â”œâ”€â”€ Gerar relatÃ³rios
â””â”€â”€ Documentar no GitHub

FASE 6: Escala (Semana 6)
â”œâ”€â”€ Processar os 50GB completos
â”œâ”€â”€ Medir performance
â”œâ”€â”€ Otimizar bottlenecks
â””â”€â”€ Preparar apresentaÃ§Ã£o
```

---

## ğŸ—ï¸ Arquitetura do Sistema

### VisÃ£o Geral

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                         VPS OVH (8 cores / 24GB RAM)                        â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        CAMADA DE GERAÃ‡ÃƒO                            â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚   â”‚
â”‚  â”‚   â”‚ ShadowTraffic â”‚  Gera 50GB de dados sintÃ©ticos:                â”‚   â”‚
â”‚  â”‚   â”‚              â”‚  â€¢ Customers (perfil + comportamento)            â”‚   â”‚
â”‚  â”‚   â”‚  (Gerador)   â”‚  â€¢ Cards (cartÃµes dos clientes)                 â”‚   â”‚
â”‚  â”‚   â”‚              â”‚  â€¢ Devices (dispositivos conhecidos)            â”‚   â”‚
â”‚  â”‚   â”‚              â”‚  â€¢ Transactions (95% legÃ­timas + 5% fraude)     â”‚   â”‚
â”‚  â”‚   â”‚              â”‚  â€¢ Chargebacks (disputas)                       â”‚   â”‚
â”‚  â”‚   â”‚              â”‚  â€¢ Blocklist (bloqueios)                        â”‚   â”‚
â”‚  â”‚   â”‚              â”‚  â€¢ Audit Log (compliance)                       â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚   â”‚
â”‚  â”‚          â”‚                                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     CAMADA DE STREAMING                             â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚   â”‚
â”‚  â”‚   â”‚    Kafka     â”‚â—„â”€â”€â”€â”€â–ºâ”‚  Zookeeper   â”‚                           â”‚   â”‚
â”‚  â”‚   â”‚              â”‚      â”‚              â”‚                           â”‚   â”‚
â”‚  â”‚   â”‚   Topics:    â”‚      â”‚ (Coordena o  â”‚                           â”‚   â”‚
â”‚  â”‚   â”‚   â€¢ customersâ”‚      â”‚   cluster)   â”‚                           â”‚   â”‚
â”‚  â”‚   â”‚   â€¢ cards    â”‚      â”‚              â”‚                           â”‚   â”‚
â”‚  â”‚   â”‚   â€¢ devices  â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚   â”‚
â”‚  â”‚   â”‚   â€¢ transactions                                                â”‚   â”‚
â”‚  â”‚   â”‚   â€¢ chargebacks                                                 â”‚   â”‚
â”‚  â”‚   â”‚   â€¢ blocklist                                                   â”‚   â”‚
â”‚  â”‚   â”‚   â€¢ audit_log                                                   â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚   â”‚
â”‚  â”‚          â”‚                                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    CAMADA DE PROCESSAMENTO                          â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚   â”‚
â”‚  â”‚   â”‚ Spark Master â”‚â—„â”€â”€â”€â”€â–ºâ”‚ Spark Worker â”‚                           â”‚   â”‚
â”‚  â”‚   â”‚              â”‚      â”‚              â”‚                           â”‚   â”‚
â”‚  â”‚   â”‚  Coordena    â”‚      â”‚  8GB RAM     â”‚                           â”‚   â”‚
â”‚  â”‚   â”‚  os jobs     â”‚      â”‚  4 cores     â”‚                           â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   Jobs PySpark:                                                     â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ bronze_layer.py    (ingestÃ£o crua)                           â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ silver_layer.py    (limpeza e tipagem)                       â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€ gold_layer.py      (agregaÃ§Ãµes de negÃ³cio)                   â”‚   â”‚
â”‚  â”‚   â””â”€â”€ fraud_detection.py (8 regras + score)                        â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    CAMADA DE ARMAZENAMENTO                          â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚   â”‚                    MinIO                         â”‚              â”‚   â”‚
â”‚  â”‚   â”‚              (Data Lake - S3 Compatible)         â”‚              â”‚   â”‚
â”‚  â”‚   â”‚                                                  â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚            BRONZE LAYER                â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚         "Dados crus, como chegaram"    â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚                                        â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   /bronze/customers/                   â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   /bronze/cards/                       â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   /bronze/devices/                     â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   /bronze/transactions/                â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   /bronze/chargebacks/                 â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   /bronze/blocklist/                   â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   /bronze/audit_log/                   â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚                                        â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   Formato: JSON/Parquet                â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   Sem transformaÃ§Ã£o                    â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚                       â”‚                          â”‚              â”‚   â”‚
â”‚  â”‚   â”‚                       â–¼                          â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚            SILVER LAYER                â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚      "Dados limpos e padronizados"     â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚                                        â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   â€¢ Tipos corrigidos                   â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   â€¢ Timestamps convertidos             â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   â€¢ Dados duplicados removidos         â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   â€¢ Campos calculados adicionados      â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   â€¢ Joins entre entidades              â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚                                        â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   Formato: Delta Lake (Parquet)        â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚                       â”‚                          â”‚              â”‚   â”‚
â”‚  â”‚   â”‚                       â–¼                          â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚             GOLD LAYER                 â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚      "MÃ©tricas prontas para consumo"   â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚                                        â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   â€¢ fraud_by_type                      â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   â€¢ fraud_by_hour                      â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   â€¢ approval_rate_daily                â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   â€¢ false_positive_rate                â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   â€¢ chargeback_rate                    â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   â€¢ sla_metrics                        â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   â€¢ rule_effectiveness                 â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚                                        â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â”‚   Formato: Delta Lake (Parquet)        â”‚    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚              â”‚   â”‚
â”‚  â”‚   â”‚                                                  â”‚              â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚   â”‚
â”‚  â”‚   â”‚  PostgreSQL  â”‚  Armazena mÃ©tricas Gold para consulta rÃ¡pida    â”‚   â”‚
â”‚  â”‚   â”‚              â”‚  pelos dashboards                                â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     CAMADA DE VISUALIZAÃ‡ÃƒO                          â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚   â”‚
â”‚  â”‚   â”‚   Metabase   â”‚      â”‚  Streamlit   â”‚                           â”‚   â”‚
â”‚  â”‚   â”‚              â”‚      â”‚              â”‚                           â”‚   â”‚
â”‚  â”‚   â”‚  Dashboards  â”‚      â”‚  Dashboards  â”‚                           â”‚   â”‚
â”‚  â”‚   â”‚  de negÃ³cio  â”‚      â”‚  customizadosâ”‚                           â”‚   â”‚
â”‚  â”‚   â”‚  (no-code)   â”‚      â”‚  (Python)    â”‚                           â”‚   â”‚
â”‚  â”‚   â”‚              â”‚      â”‚              â”‚                           â”‚   â”‚
â”‚  â”‚   â”‚  â€¢ KPIs      â”‚      â”‚  â€¢ Alertas   â”‚                           â”‚   â”‚
â”‚  â”‚   â”‚  â€¢ GrÃ¡ficos  â”‚      â”‚  â€¢ Detalhes  â”‚                           â”‚   â”‚
â”‚  â”‚   â”‚  â€¢ RelatÃ³riosâ”‚      â”‚  â€¢ Filtros   â”‚                           â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        CAMADA DE ACESSO                             â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚   â”‚
â”‚  â”‚   â”‚   Traefik    â”‚  Reverse proxy + SSL                            â”‚   â”‚
â”‚  â”‚   â”‚              â”‚                                                  â”‚   â”‚
â”‚  â”‚   â”‚  Rotas:      â”‚                                                  â”‚   â”‚
â”‚  â”‚   â”‚  â€¢ metabase.projeto.com â†’ Metabase                             â”‚   â”‚
â”‚  â”‚   â”‚  â€¢ dash.projeto.com â†’ Streamlit                                â”‚   â”‚
â”‚  â”‚   â”‚  â€¢ spark.projeto.com â†’ Spark UI                                â”‚   â”‚
â”‚  â”‚   â”‚  â€¢ minio.projeto.com â†’ MinIO Console                           â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                              ğŸŒ INTERNET
                                    â”‚
                                    â–¼
                            ğŸ‘¨â€ğŸ’» VocÃª acessa
                              de qualquer lugar
```

---

## ğŸ“Š Entidades de Dados

### Modelo de Dados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           MODELO DE DADOS                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  CUSTOMERS   â”‚         â”‚    CARDS     â”‚         â”‚   DEVICES    â”‚
    â”‚              â”‚         â”‚              â”‚         â”‚              â”‚
    â”‚ â€¢ customer_idâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ card_id    â”‚         â”‚ â€¢ device_id  â”‚
    â”‚ â€¢ demographics         â”‚ â€¢ customer_idâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ customer_idâ”‚
    â”‚   - name     â”‚         â”‚ â€¢ card_brand â”‚         â”‚ â€¢ device_typeâ”‚
    â”‚   - age      â”‚         â”‚ â€¢ card_type  â”‚         â”‚ â€¢ os         â”‚
    â”‚   - gender   â”‚         â”‚ â€¢ credit_limit         â”‚ â€¢ browser    â”‚
    â”‚   - profession         â”‚ â€¢ is_virtual â”‚         â”‚ â€¢ fingerprintâ”‚
    â”‚   - income   â”‚         â”‚ â€¢ is_contactless       â”‚ â€¢ is_trusted â”‚
    â”‚ â€¢ location   â”‚         â”‚              â”‚         â”‚              â”‚
    â”‚   - home_cityâ”‚         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚   - home_lat â”‚                â”‚                        â”‚
    â”‚   - home_lng â”‚                â”‚                        â”‚
    â”‚   - usual_radius             â”‚                        â”‚
    â”‚ â€¢ behavior   â”‚                â”‚                        â”‚
    â”‚   - avg_spendâ”‚                â”‚                        â”‚
    â”‚   - avg_ticket               â”‚                        â”‚
    â”‚   - preferred_categories     â”‚                        â”‚
    â”‚   - usual_hours              â”‚                        â”‚
    â”‚ â€¢ risk       â”‚                â”‚                        â”‚
    â”‚   - credit_score             â”‚                        â”‚
    â”‚   - risk_profile             â–¼                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
                        â”‚      TRANSACTIONS        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚                          â”‚
                        â”‚ â€¢ transaction_id         â”‚
                        â”‚ â€¢ card_id                â”‚
                        â”‚ â€¢ customer_id            â”‚
                        â”‚ â€¢ device_id              â”‚
                        â”‚ â€¢ amount                 â”‚
                        â”‚ â€¢ merchant               â”‚
                        â”‚   - name                 â”‚
                        â”‚   - category             â”‚
                        â”‚   - mcc                  â”‚
                        â”‚   - city                 â”‚
                        â”‚ â€¢ location               â”‚
                        â”‚   - lat/lng              â”‚
                        â”‚   - ip_address           â”‚
                        â”‚ â€¢ context                â”‚
                        â”‚   - channel              â”‚
                        â”‚   - has_pin              â”‚
                        â”‚   - has_3ds              â”‚
                        â”‚ â€¢ status                 â”‚
                        â”‚ â€¢ is_fraud               â”‚
                        â”‚ â€¢ fraud_type             â”‚
                        â”‚ â€¢ fraud_score            â”‚
                        â”‚ â€¢ timestamp              â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                        â”‚                        â”‚
            â–¼                        â–¼                        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  CHARGEBACKS â”‚        â”‚  AUDIT_LOG   â”‚        â”‚  BLOCKLIST   â”‚
    â”‚              â”‚        â”‚              â”‚        â”‚              â”‚
    â”‚ â€¢ chargeback_id       â”‚ â€¢ log_id     â”‚        â”‚ â€¢ entry_id   â”‚
    â”‚ â€¢ transaction_id      â”‚ â€¢ transaction_id      â”‚ â€¢ type       â”‚
    â”‚ â€¢ reason     â”‚        â”‚ â€¢ action     â”‚        â”‚ â€¢ value_hash â”‚
    â”‚ â€¢ status     â”‚        â”‚ â€¢ fraud_scoreâ”‚        â”‚ â€¢ reason     â”‚
    â”‚ â€¢ is_friendly_fraud   â”‚ â€¢ rules_triggered     â”‚ â€¢ blocked_at â”‚
    â”‚ â€¢ opened_at  â”‚        â”‚ â€¢ response_time       â”‚ â€¢ blocked_by â”‚
    â”‚ â€¢ resolved_atâ”‚        â”‚ â€¢ decided_by â”‚        â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Sistema de DetecÃ§Ã£o de Fraude

### As 8 Regras

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        REGRAS DE DETECÃ‡ÃƒO                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   REGRA 1: CLONAGEM                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Se: mesma conta + cidades diferentes + intervalo < 30 minutos      â”‚   â”‚
â”‚   â”‚  EntÃ£o: suspeita de clonagem                                        â”‚   â”‚
â”‚   â”‚  Peso no score: 30 pontos                                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   REGRA 2: TESTE DE CARTÃƒO                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Se: 3+ transaÃ§Ãµes < R$10 em 5 minutos                              â”‚   â”‚
â”‚   â”‚  EntÃ£o: suspeita de teste de cartÃ£o                                 â”‚   â”‚
â”‚   â”‚  Peso no score: 25 pontos                                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   REGRA 3: GASTO ANORMAL                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Se: valor > 50% da mÃ©dia mensal do cliente                         â”‚   â”‚
â”‚   â”‚  EntÃ£o: suspeita de uso indevido                                    â”‚   â”‚
â”‚   â”‚  Peso no score: 15 pontos                                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   REGRA 4: ACCOUNT TAKEOVER                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Se: device desconhecido + valor > R$500                            â”‚   â”‚
â”‚   â”‚  EntÃ£o: suspeita de roubo de conta                                  â”‚   â”‚
â”‚   â”‚  Peso no score: 25 pontos                                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   REGRA 5: ANOMALIA GEOGRÃFICA                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Se: distÃ¢ncia > 3x o raio habitual do cliente                      â”‚   â”‚
â”‚   â”‚  EntÃ£o: compra fora do padrÃ£o geogrÃ¡fico                            â”‚   â”‚
â”‚   â”‚  Peso no score: 20 pontos                                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   REGRA 6: HORÃRIO ATÃPICO                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Se: hora da compra fora do horÃ¡rio usual do cliente                â”‚   â”‚
â”‚   â”‚  EntÃ£o: comportamento incomum                                       â”‚   â”‚
â”‚   â”‚  Peso no score: 10 pontos                                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   REGRA 7: CATEGORIA SUSPEITA                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Se: categoria de alto risco + primeira compra nessa categoria      â”‚   â”‚
â”‚   â”‚  Categorias: joias, eletrÃ´nicos, gambling, crypto, gift cards       â”‚   â”‚
â”‚   â”‚  Peso no score: 15 pontos                                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   REGRA 8: INCOMPATIBILIDADE DE IDADE                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Se: jovem (<25) + joias caras OU idoso (>70) + gaming              â”‚   â”‚
â”‚   â”‚  EntÃ£o: perfil incompatÃ­vel com compra                              â”‚   â”‚
â”‚   â”‚  Peso no score: 10 pontos                                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           FRAUD SCORE                                        â”‚
â”‚                                                                              â”‚
â”‚   Score = soma dos pesos das regras ativadas (0 a 150 pontos)              â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Score 0-24:   LOW     â†’ âœ… Aprovar automaticamente                 â”‚   â”‚
â”‚   â”‚  Score 25-49:  MEDIUM  â†’ â¸ï¸ Enviar para revisÃ£o manual             â”‚   â”‚
â”‚   â”‚  Score 50+:    HIGH    â†’ âŒ Bloquear + ğŸ“± Alertar cliente          â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ KPIs e MÃ©tricas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MÃ‰TRICAS DO DASHBOARD                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   ğŸ“Š OPERACIONAIS                                                           â”‚
â”‚   â”œâ”€â”€ Taxa de AprovaÃ§Ã£o (%)                                                 â”‚
â”‚   â”œâ”€â”€ Taxa de Bloqueio (%)                                                  â”‚
â”‚   â”œâ”€â”€ TransaÃ§Ãµes em RevisÃ£o (#)                                             â”‚
â”‚   â”œâ”€â”€ Tempo MÃ©dio de DecisÃ£o (ms)                                           â”‚
â”‚   â””â”€â”€ SLA Compliance (% < 100ms)                                            â”‚
â”‚                                                                              â”‚
â”‚   ğŸ¯ DETECÃ‡ÃƒO                                                               â”‚
â”‚   â”œâ”€â”€ Fraudes Detectadas (#)                                                â”‚
â”‚   â”œâ”€â”€ Fraudes por Tipo (breakdown)                                          â”‚
â”‚   â”œâ”€â”€ Precision (fraudes corretas / total bloqueado)                        â”‚
â”‚   â”œâ”€â”€ Recall (fraudes detectadas / total de fraudes)                        â”‚
â”‚   â””â”€â”€ F1 Score                                                              â”‚
â”‚                                                                              â”‚
â”‚   ğŸ’° FINANCEIRO                                                             â”‚
â”‚   â”œâ”€â”€ Valor Protegido (R$)                                                  â”‚
â”‚   â”œâ”€â”€ Perdas por Fraude (R$)                                                â”‚
â”‚   â”œâ”€â”€ Custo de Falso Positivo (R$ perdidos por bloqueio incorreto)          â”‚
â”‚   â”œâ”€â”€ Chargeback Rate (%)                                                   â”‚
â”‚   â””â”€â”€ Chargeback Amount (R$)                                                â”‚
â”‚                                                                              â”‚
â”‚   ğŸ“‹ COMPLIANCE                                                             â”‚
â”‚   â”œâ”€â”€ DecisÃµes Auditadas (#)                                                â”‚
â”‚   â”œâ”€â”€ Overrides Manuais (#)                                                 â”‚
â”‚   â”œâ”€â”€ Tempo de RetenÃ§Ã£o de Logs                                             â”‚
â”‚   â””â”€â”€ Blocklist Entries (#)                                                 â”‚
â”‚                                                                              â”‚
â”‚   ğŸ”§ EFETIVIDADE DAS REGRAS                                                 â”‚
â”‚   â”œâ”€â”€ Regra 1 (Clonagem): X fraudes detectadas                              â”‚
â”‚   â”œâ”€â”€ Regra 2 (Card Testing): X fraudes detectadas                          â”‚
â”‚   â”œâ”€â”€ ...                                                                   â”‚
â”‚   â””â”€â”€ Regra 8 (Age Mismatch): X fraudes detectadas                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Estrutura de Arquivos

```
fraud-detection-pipeline/
â”‚
â”œâ”€â”€ ğŸ“„ README.md                    # DocumentaÃ§Ã£o principal
â”œâ”€â”€ ğŸ“„ PROJECT_PLAN.md              # Este arquivo
â”œâ”€â”€ ğŸ“„ docker-compose.yml           # OrquestraÃ§Ã£o dos serviÃ§os
â”œâ”€â”€ ğŸ“„ .env                         # VariÃ¡veis de ambiente
â”‚
â”œâ”€â”€ ğŸ“‚ shadowtraffic/
â”‚   â”œâ”€â”€ ğŸ“„ license.env              # LicenÃ§a do ShadowTraffic
â”‚   â””â”€â”€ ğŸ“„ config.json              # ConfiguraÃ§Ã£o de geraÃ§Ã£o de dados
â”‚
â”œâ”€â”€ ğŸ“‚ spark/
â”‚   â””â”€â”€ ğŸ“‚ jobs/
â”‚       â”œâ”€â”€ ğŸ“„ bronze_layer.py      # IngestÃ£o de dados brutos
â”‚       â”œâ”€â”€ ğŸ“„ silver_layer.py      # Limpeza e transformaÃ§Ã£o
â”‚       â”œâ”€â”€ ğŸ“„ gold_layer.py        # AgregaÃ§Ãµes de negÃ³cio
â”‚       â””â”€â”€ ğŸ“„ fraud_detection.py   # Regras de detecÃ§Ã£o
â”‚
â”œâ”€â”€ ğŸ“‚ streamlit/
â”‚   â””â”€â”€ ğŸ“„ dashboard.py             # Dashboard customizado
â”‚
â”œâ”€â”€ ğŸ“‚ data/                        # DiretÃ³rio local (desenvolvimento)
â”‚   â”œâ”€â”€ ğŸ“‚ raw/
â”‚   â”œâ”€â”€ ğŸ“‚ bronze/
â”‚   â”œâ”€â”€ ğŸ“‚ silver/
â”‚   â””â”€â”€ ğŸ“‚ gold/
â”‚
â”œâ”€â”€ ğŸ“‚ docs/
â”‚   â”œâ”€â”€ ğŸ“„ architecture.md          # DocumentaÃ§Ã£o da arquitetura
â”‚   â”œâ”€â”€ ğŸ“„ data_dictionary.md       # DicionÃ¡rio de dados
â”‚   â”œâ”€â”€ ğŸ“„ fraud_rules.md           # DocumentaÃ§Ã£o das regras
â”‚   â””â”€â”€ ğŸ“‚ images/                  # Diagramas
â”‚
â””â”€â”€ ğŸ“‚ notebooks/
    â””â”€â”€ ğŸ“„ exploration.ipynb        # AnÃ¡lise exploratÃ³ria
```

---

## âœ… Checklist de Entrega

### ğŸ“Š RELATÃ“RIO DE STATUS (Novembro 2025)

#### âœ… O QUE ESTÃ IMPLEMENTADO

| Item | Status | ObservaÃ§Ãµes |
|------|--------|-------------|
| **Infraestrutura Docker** | âœ… | PostgreSQL, MinIO, Kafka, Zookeeper, Spark (1 Master + 5 Workers) |
| **Bronze Layer** | âœ… | `bronze_layer.py`, `medallion_bronze.py`, `streaming_bronze.py` |
| **Silver Layer** | âœ… | `silver_layer.py`, `medallion_silver.py`, `streaming_silver.py` |
| **Gold Layer** | âœ… | `gold_layer.py`, `medallion_gold.py`, `streaming_gold.py` |
| **Fraud Detection bÃ¡sico** | âœ… | `fraud_detection.py` com regras simples + flags avanÃ§adas |
| **IntegraÃ§Ã£o MinIO** | âœ… | Jobs `*_to_minio.py` e medallion |
| **IntegraÃ§Ã£o PostgreSQL** | âœ… | `load_to_postgres.py`, `kafka_to_postgres_batch.py`, `streaming_to_postgres.py` |
| **GeraÃ§Ã£o de Dados** | âœ… | `generate_data.py`, `generate_10m_transactions.py`, ShadowTraffic |
| **Kafka Producer** | âœ… | `kafka_producer.py` |
| **Streaming Pipeline** | âœ… | Bronzeâ†’Silverâ†’Gold streaming |
| **Batch Pipeline** | âœ… | Bronzeâ†’Silverâ†’Gold batch |
| **DocumentaÃ§Ã£o Regras** | âœ… | `docs/REGRAS_FRAUDE.md` (14 regras documentadas) |
| **Escala 10M transaÃ§Ãµes** | âœ… | Testado com sucesso (~3.5min, 47.6k tx/s) |

#### âŒ O QUE ESTÃ FALTANDO

##### ğŸ”´ CRÃTICO (Alto Impacto)

| Item | Planejado | Atual | AÃ§Ã£o NecessÃ¡ria |
|------|-----------|-------|-----------------|
| **8 Regras de Fraude Completas** | 8 regras complexas | 2 regras + 8 flags | Implementar regras faltantes |
| **Dashboard Metabase** | Configurado e rodando | âŒ NÃ£o existe | Adicionar ao docker-compose |
| **Dashboard Streamlit** | `streamlit/dashboard.py` | âŒ NÃ£o existe | Criar pasta e arquivo |
| **Escala 50GB** | Objetivo principal | 2.2GB testado | Gerar e processar 50GB |

##### ğŸŸ  IMPORTANTE (MÃ©dio Impacto)

| Item | Planejado | Atual | AÃ§Ã£o NecessÃ¡ria |
|------|-----------|-------|-----------------|
| **Entidade Cards** | Tabela de cartÃµes | âŒ NÃ£o existe | Criar schema e dados |
| **Entidade Devices** | Tabela de dispositivos | âŒ NÃ£o existe | Criar schema e dados |
| **Chargebacks** | Processamento de disputas | âŒ NÃ£o existe | Criar pipeline |
| **Blocklist** | Lista de bloqueio | âŒ NÃ£o existe | Criar tabela e lÃ³gica |
| **Audit Log** | Log de compliance | âŒ NÃ£o existe | Implementar logging |
| **Traefik** | Reverse proxy + SSL | âŒ NÃ£o existe | Adicionar ao docker-compose |

##### ğŸŸ¡ DESEJÃVEL (Baixo Impacto)

| Item | Planejado | Atual | AÃ§Ã£o NecessÃ¡ria |
|------|-----------|-------|-----------------|
| **Notebooks** | `notebooks/exploration.ipynb` | âŒ NÃ£o existe | Criar anÃ¡lise exploratÃ³ria |
| **DicionÃ¡rio de Dados** | `docs/data_dictionary.md` | âŒ NÃ£o existe | Documentar campos |
| **Arquitetura Doc** | `docs/architecture.md` | âŒ NÃ£o existe | Criar diagrama |

#### ğŸ“‹ REGRAS DE FRAUDE: Planejado vs. Implementado

| # | Regra Planejada | Status | ImplementaÃ§Ã£o Atual |
|---|-----------------|--------|---------------------|
| 1 | **Clonagem** (mesma conta, cidades diferentes, <30min) | âŒ | NÃ£o implementada |
| 2 | **Teste de CartÃ£o** (3+ tx < R$10 em 5min) | âŒ | NÃ£o implementada |
| 3 | **Gasto Anormal** (valor > 50% mÃ©dia mensal) | âš ï¸ Parcial | `is_high_value` (5x mÃ©dia 30d) |
| 4 | **Account Takeover** (device desconhecido + >R$500) | âŒ | NÃ£o implementada |
| 5 | **Anomalia GeogrÃ¡fica** (distÃ¢ncia > 3x raio habitual) | âš ï¸ Parcial | `is_gps_mismatch` |
| 6 | **HorÃ¡rio AtÃ­pico** (fora do horÃ¡rio usual) | âš ï¸ Parcial | `is_night_transaction` (2-5h fixo) |
| 7 | **Categoria Suspeita** (alto risco + primeira compra) | âŒ | NÃ£o implementada |
| 8 | **Incompatibilidade de Idade** (perfil vs compra) | âŒ | NÃ£o implementada |

**Resumo:** 0 completas, 3 parciais, 5 nÃ£o implementadas

#### ğŸ¯ FASES DO PROJETO: Status Atual

| Fase | DescriÃ§Ã£o | Status | % |
|------|-----------|--------|---|
| **FASE 1** | Ambiente Docker + Dados | âœ… Completo | 100% |
| **FASE 2** | Pipeline Bronze/Silver/Gold | âœ… Completo | 100% |
| **FASE 3** | Regras de Fraude (8 regras) | âš ï¸ Parcial | 40% |
| **FASE 4** | Operacional (Audit/Blocklist/Chargeback) | âŒ NÃ£o iniciado | 0% |
| **FASE 5** | VisualizaÃ§Ã£o (Metabase/Streamlit) | âŒ NÃ£o iniciado | 0% |
| **FASE 6** | Escala 50GB + DocumentaÃ§Ã£o | âš ï¸ Parcial | 30% |

#### ğŸš€ PRÃ“XIMOS PASSOS RECOMENDADOS

##### Prioridade 1 (Esta semana)
1. â¬œ Implementar as **8 regras de fraude completas**
2. â¬œ Adicionar **Metabase** ao docker-compose
3. â¬œ Criar **Streamlit dashboard** bÃ¡sico

##### Prioridade 2 (PrÃ³xima semana)
4. â¬œ Criar entidades **Cards** e **Devices**
5. â¬œ Implementar **Chargebacks** pipeline
6. â¬œ Criar **Blocklist** e **Audit Log**

##### Prioridade 3 (Semana 3)
7. â¬œ Escalar para **50GB de dados**
8. â¬œ Adicionar **Traefik** para acesso externo
9. â¬œ Completar **documentaÃ§Ã£o** (README, architecture, data dictionary)

---

### CHECKLIST ORIGINAL

### FASE 1: Ambiente

- [ ] VPS configurada e acessÃ­vel
- [ ] Docker e Docker Compose instalados
- [ ] Todos os containers rodando
- [ ] ShadowTraffic gerando dados de teste

### FASE 2: Pipeline

- [ ] Bronze layer funcionando
- [ ] Silver layer com dados limpos
- [ ] Gold layer com mÃ©tricas
- [ ] Dados salvos no MinIO

### FASE 3: Fraude

- [ ] 8 regras implementadas
- [ ] Fraud score calculado
- [ ] ClassificaÃ§Ã£o LOW/MEDIUM/HIGH
- [ ] Audit log registrando decisÃµes

### FASE 4: Operacional

- [ ] Chargebacks processados
- [ ] Blocklist funcionando
- [ ] MÃ©tricas de SLA calculadas
- [ ] KPIs de negÃ³cio prontos

### FASE 5: VisualizaÃ§Ã£o

- [ ] Dashboard Metabase configurado
- [ ] Dashboard Streamlit funcionando
- [ ] GrÃ¡ficos principais criados
- [ ] Acesso externo via Traefik

### FASE 6: DocumentaÃ§Ã£o

- [ ] README completo
- [ ] Diagramas de arquitetura
- [ ] DicionÃ¡rio de dados
- [ ] RepositÃ³rio GitHub pÃºblico
- [ ] Post no LinkedIn

---

## ğŸ¯ Resultado Final

Ao completar o projeto, vocÃª terÃ¡:

| EntregÃ¡vel | DescriÃ§Ã£o |
|------------|-----------|
| **RepositÃ³rio GitHub** | CÃ³digo completo + documentaÃ§Ã£o profissional |
| **Pipeline funcionando** | 50GB processados na sua VPS |
| **Dashboards online** | AcessÃ­veis de qualquer lugar |
| **DocumentaÃ§Ã£o tÃ©cnica** | Arquitetura, dicionÃ¡rio, regras |
| **Post LinkedIn** | Showcase do projeto |
| **Conhecimento prÃ¡tico** | Spark, Kafka, Data Lake, Fraud Detection |

---

## ğŸ› ï¸ Stack TecnolÃ³gico

| Categoria | Tecnologia | VersÃ£o |
|-----------|------------|--------|
| **GeraÃ§Ã£o de Dados** | ShadowTraffic | Latest |
| **Mensageria** | Apache Kafka | 7.5.0 |
| **CoordenaÃ§Ã£o** | Zookeeper | 7.5.0 |
| **Processamento** | Apache Spark | 3.5 |
| **Linguagem** | PySpark / Python | 3.11 |
| **Data Lake** | MinIO | Latest |
| **Formato** | Delta Lake / Parquet | - |
| **Banco de Dados** | PostgreSQL | 15 |
| **BI** | Metabase | Latest |
| **Dashboard** | Streamlit | Latest |
| **Proxy** | Traefik | Latest |
| **Containers** | Docker / Docker Compose | Latest |
| **SO** | Ubuntu | 25.04 |

---

## ğŸ“ Recursos e ReferÃªncias

### DocumentaÃ§Ã£o Oficial

- [ShadowTraffic Docs](https://docs.shadowtraffic.io/)
- [Apache Spark](https://spark.apache.org/docs/latest/)
- [Delta Lake](https://docs.delta.io/)
- [MinIO](https://min.io/docs/)
- [Kafka](https://kafka.apache.org/documentation/)

### Exemplos de Fraude Detection

- [Nubank Engineering Blog](https://building.nubank.com.br/)
- [Netflix Tech Blog](https://netflixtechblog.com/)
- [Uber Engineering](https://eng.uber.com/)

---

## ğŸ“ Notas

Este plano foi criado em novembro de 2025 como guia para construÃ§Ã£o de um projeto de portfÃ³lio em Data Engineering com foco em detecÃ§Ã£o de fraudes financeiras.

**Autor:** Abner Borda Fonseca  
**Objetivo:** TransiÃ§Ã£o de carreira para Data Engineering (nÃ­vel Pleno)  
**Prazo estimado:** 6 semanas
